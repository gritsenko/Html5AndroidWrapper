(()=>{"use strict";var e,n,t,o,r,i,u,a,s,d,m,c,l,f,w,v,x,h,C,k,p,_,b,T,j,y,R={};R.d=(e,n)=>{for(var t in n)R.o(n,t)&&!R.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},R.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),window.KM=(r=50201,i={requestTimeout:"RequestTimeout",rejected:"Rejected",canceled:"Canceled"},u={hasClient:function(){return navigator.userAgent.toLowerCase().indexOf("android")>0&&"kamomeAndroid"in window},_send:function(e){return setTimeout((function(){return window.kamomeAndroid.kamomeSend(e)}),0)}},a={hasClient:function(){return"webkit"in window&&!!window.webkit.messageHandlers.kamomeSend},_send:function(e){return setTimeout((function(){return window.webkit.messageHandlers.kamomeSend.postMessage(e)}),0)}},s={hasClient:function(){return"kamomeFlutter"in window||"flutter_inappwebview"in window},_send:function(e){"kamomeFlutter"in window?setTimeout((function(){return window.kamomeFlutter.postMessage(e)}),0):"flutter_inappwebview"in window&&setTimeout((function(){return window.flutter_inappwebview.callHandler("kamomeFlutter",e)}),0)}},e={},t=function(n){return o(n)&&delete e[n],this},o=function(n){return n in e},(n=function(n,t){return e[n]=t,this})("_kamomeSYN",(function(e,n){return n({versionCode:r})})),n("_kamomeACK",(function(e,n){return n()})),d={addCommand:n,removeCommand:t,hasCommand:o,send:function(e,o){return new Promise((function(r,i){var u="_km_"+e+"_"+_();n(u,(function(e,n){if(e)if(e.success)r(e.result);else{var o=e.error||"UnknownError";i(o)}else i("UnknownError");n(),t(u)})),j(e,o,u)}))},_execCommand:function(n){return setTimeout((function(){e[n.name](n.data,(function(e){return b(e,n.id)}),(function(e){return T(e?encodeURIComponent(e):null,n.id)}))}),0)}},m="_kamomeSYN",c="_kamomeACK",l={},f={},w=1e4,v=!1,x=null,h=function(e){var n=JSON.stringify({name:e.name,data:e.data,id:e.id});a.hasClient()?a._send(n):u.hasClient()?u._send(n):s.hasClient()?s._send(n):d.hasCommand(e.name)&&d._execCommand(e),e.timeout>0&&setTimeout((function(){var n=f[e.id];n&&(n.reject(i.requestTimeout+":"+n.name),delete f[n.id])}),e.timeout)},C=0,k=function e(){if(v)for(var n in f){var t=f[n];h(t)}else C<50?(C++,setTimeout(e,200)):console.error("[kamome.js] Waiting for ready has timed out.")},p=function(e,n,t){return t=t||w,new Promise((function(o,r){var i=_(),u={id:i,name:e,data:n,timeout:t,resolve:o,reject:r};f[i]=u,e===m||e===c?h(u):k()}))},_=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})).toLowerCase()},b=function(e,n){var t=f[n];return t&&(t.resolve(e),delete f[n]),null},T=function(e,n){var t=f[n];if(t){var o=e?":"+decodeURIComponent(e):"";t.reject(i.rejected+":"+t.name+o),delete f[n]}return null},j=function(e,n,t){return e in l&&new Promise((function(t,o){(0,l[e])(n,t,o)})).then((function(e){return p(t,{result:e||null,success:!0},null)})).catch((function(e){return p(t,{error:e||null,success:!1},null)})),null},y=function(){p(m,null,5e3).then((function(e){r!==e.versionCode&&console.warn("[kamome.js] The Kamome native library version does not match. Please update it to latest version."),v=!0,setTimeout((function(){x&&x()}),0),p(c,null,5e3).catch((function(){return console.warn("[kamome.js] Failed to send ACK.")}))})).catch((function(){console.warn("[kamome.js] Failed to send SYN. Please update the Kamome native library to latest version."),v=!0}))},"flutter_inappwebview"in window?window.addEventListener("flutterInAppWebViewPlatformReady",y):window.addEventListener("DOMContentLoaded",y),{VERSION_CODE:r,Error:i,android:u,iOS:a,flutter:s,browser:d,setDefaultRequestTimeout:function(e){return w=e,this},hasNoClients:function(){return!a.hasClient()&&!u.hasClient()&&!s.hasClient()},addReceiver:function(e,n){return l[e]=n,this},removeReceiver:function(e){return e in l&&delete l[e],this},send:p,onComplete:b,onError:T,onReceive:j,isReady:function(){return v},setReadyEventListener:function(e){return x=e,this}});window.KM})();